{"ast":null,"code":"var _jsxFileName = \"D:\\\\Code\\\\react+node\\\\blog\\\\client\\\\src\\\\pages\\\\Write.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport ReactQuill from \"react-quill\";\nimport \"react-quill/dist/quill.snow.css\";\nimport axios from \"axios\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport moment from \"moment\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Write = () => {\n  _s();\n\n  const state = useLocation().state;\n  const [value, setValue] = useState((state === null || state === void 0 ? void 0 : state.desc) || \"\");\n  const [title, setTitle] = useState((state === null || state === void 0 ? void 0 : state.title) || \"\");\n  const [file, setFile] = useState(null);\n  const [cat, setCat] = useState((state === null || state === void 0 ? void 0 : state.cat) || \"\");\n  const navigate = useNavigate();\n\n  const upload = async () => {\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      const res = await axios.post(\"/upload\", formData);\n      return res.data;\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleClick = async e => {\n    e.preventDefault();\n    const imgUrl = await upload();\n\n    try {\n      state ? await axios.put(`/posts/${state.id}`, {\n        title,\n        desc: value,\n        cat,\n        img: file ? imgUrl : \"\"\n      }) : await axios.post(`/posts/`, {\n        title,\n        desc: value,\n        cat,\n        img: file ? imgUrl : \"\",\n        date: moment(Date.now()).format(\"YYYY-MM-DD HH:mm:ss\")\n      });\n      navigate(\"/\");\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"add\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: title,\n        placeholder: \"Title\",\n        onChange: e => setTitle(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"editorContainer\",\n        children: /*#__PURE__*/_jsxDEV(ReactQuill, {\n          className: \"editor\",\n          theme: \"snow\",\n          value: value,\n          onChange: setValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"menu\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Publish\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Status: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 7\n          }, this), \" Draft\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Visibility: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 7\n          }, this), \" Public\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            display: \"none\"\n          },\n          type: \"file\",\n          id: \"file\",\n          name: \"\",\n          onChange: e => setFile(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"file\",\n          htmlFor: \"file\",\n          children: \"Upload Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"Save as a draft\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleClick,\n            children: \"Publish\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cat\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            defaultChecked: cat === \"art\",\n            name: \"cat\",\n            value: \"art\",\n            id: \"art\",\n            onChange: e => setCat(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"art\",\n            children: \"Art\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cat\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            defaultChecked: cat === \"science\",\n            name: \"cat\",\n            value: \"science\",\n            id: \"science\",\n            onChange: e => setCat(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"science\",\n            children: \"Science\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cat\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            defaultChecked: cat === \"technology\",\n            name: \"cat\",\n            value: \"technology\",\n            id: \"technology\",\n            onChange: e => setCat(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"technology\",\n            children: \"Technology\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cat\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            defaultChecked: cat === \"cinema\",\n            name: \"cat\",\n            value: \"cinema\",\n            id: \"cinema\",\n            onChange: e => setCat(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"cinema\",\n            children: \"Cinema\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cat\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            defaultChecked: cat === \"design\",\n            name: \"cat\",\n            value: \"design\",\n            id: \"design\",\n            onChange: e => setCat(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"design\",\n            children: \"Design\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cat\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            defaultChecked: cat === \"food\",\n            name: \"cat\",\n            value: \"food\",\n            id: \"food\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"food\",\n            children: \"Food\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Write, \"PT/1M0ER5c+5V9jhC2L1KBRjHfw=\", false, function () {\n  return [useLocation, useNavigate];\n});\n\n_c = Write;\nexport default Write;\n\nvar _c;\n\n$RefreshReg$(_c, \"Write\");","map":{"version":3,"sources":["D:/Code/react+node/blog/client/src/pages/Write.jsx"],"names":["React","useState","ReactQuill","axios","useLocation","useNavigate","moment","Write","state","value","setValue","desc","title","setTitle","file","setFile","cat","setCat","navigate","upload","formData","FormData","append","res","post","data","err","console","log","handleClick","e","preventDefault","imgUrl","put","id","img","date","Date","now","format","target","display","files"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\nimport axios from \"axios\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\n\r\nconst Write = () => {\r\n\tconst state = useLocation().state;\r\n\r\n\tconst [value, setValue] = useState(state?.desc || \"\");\r\n\tconst [title, setTitle] = useState(state?.title || \"\");\r\n\tconst [file, setFile] = useState(null);\r\n\tconst [cat, setCat] = useState(state?.cat || \"\");\r\n\r\n\tconst navigate = useNavigate();\r\n\r\n\tconst upload = async () => {\r\n\t\ttry {\r\n\t\t\tconst formData = new FormData();\r\n\t\t\tformData.append(\"file\", file);\r\n\t\t\tconst res = await axios.post(\"/upload\", formData);\r\n\t\t\treturn res.data;\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleClick = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tconst imgUrl = await upload();\r\n\r\n\t\ttry {\r\n\t\t\tstate\r\n\t\t\t\t? await axios.put(`/posts/${state.id}`, {\r\n\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\tdesc: value,\r\n\t\t\t\t\t\tcat,\r\n\t\t\t\t\t\timg: file ? imgUrl : \"\",\r\n\t\t\t\t  })\r\n\t\t\t\t: await axios.post(`/posts/`, {\r\n\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\tdesc: value,\r\n\t\t\t\t\t\tcat,\r\n\t\t\t\t\t\timg: file ? imgUrl : \"\",\r\n\t\t\t\t\t\tdate: moment(Date.now()).format(\"YYYY-MM-DD HH:mm:ss\"),\r\n\t\t\t\t  });\r\n\t\t\t\t  navigate(\"/\");\r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"add\">\r\n\t\t\t<div className=\"content\">\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tvalue={title}\r\n\t\t\t\t\tplaceholder=\"Title\"\r\n\t\t\t\t\tonChange={(e) => setTitle(e.target.value)}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"editorContainer\">\r\n\t\t\t\t\t<ReactQuill\r\n\t\t\t\t\t\tclassName=\"editor\"\r\n\t\t\t\t\t\ttheme=\"snow\"\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={setValue}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"menu\">\r\n\t\t\t\t<div className=\"item\">\r\n\t\t\t\t\t<h1>Publish</h1>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<b>Status: </b> Draft\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<b>Visibility: </b> Public\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\tid=\"file\"\r\n\t\t\t\t\t\tname=\"\"\r\n\t\t\t\t\t\tonChange={(e) => setFile(e.target.files[0])}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<label className=\"file\" htmlFor=\"file\">\r\n\t\t\t\t\t\tUpload Image\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<div className=\"buttons\">\r\n\t\t\t\t\t\t<button>Save as a draft</button>\r\n\t\t\t\t\t\t<button onClick={handleClick}>Publish</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"item\">\r\n\t\t\t\t\t<h1>Category</h1>\r\n\t\t\t\t\t<div className=\"cat\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\tdefaultChecked={cat === \"art\"}\r\n\t\t\t\t\t\t\tname=\"cat\"\r\n\t\t\t\t\t\t\tvalue=\"art\"\r\n\t\t\t\t\t\t\tid=\"art\"\r\n\t\t\t\t\t\t\tonChange={(e) => setCat(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"art\">Art</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"cat\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\tdefaultChecked={cat === \"science\"}\r\n\t\t\t\t\t\t\tname=\"cat\"\r\n\t\t\t\t\t\t\tvalue=\"science\"\r\n\t\t\t\t\t\t\tid=\"science\"\r\n\t\t\t\t\t\t\tonChange={(e) => setCat(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"science\">Science</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"cat\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\tdefaultChecked={cat === \"technology\"}\r\n\t\t\t\t\t\t\tname=\"cat\"\r\n\t\t\t\t\t\t\tvalue=\"technology\"\r\n\t\t\t\t\t\t\tid=\"technology\"\r\n\t\t\t\t\t\t\tonChange={(e) => setCat(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"technology\">Technology</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"cat\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\tdefaultChecked={cat === \"cinema\"}\r\n\t\t\t\t\t\t\tname=\"cat\"\r\n\t\t\t\t\t\t\tvalue=\"cinema\"\r\n\t\t\t\t\t\t\tid=\"cinema\"\r\n\t\t\t\t\t\t\tonChange={(e) => setCat(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"cinema\">Cinema</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"cat\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\tdefaultChecked={cat === \"design\"}\r\n\t\t\t\t\t\t\tname=\"cat\"\r\n\t\t\t\t\t\t\tvalue=\"design\"\r\n\t\t\t\t\t\t\tid=\"design\"\r\n\t\t\t\t\t\t\tonChange={(e) => setCat(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"design\">Design</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"cat\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\tdefaultChecked={cat === \"food\"}\r\n\t\t\t\t\t\t\tname=\"cat\"\r\n\t\t\t\t\t\t\tvalue=\"food\"\r\n\t\t\t\t\t\t\tid=\"food\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label htmlFor=\"food\">Food</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Write;\r\n"]},"metadata":{},"sourceType":"module"}