{"ast":null,"code":"import d, { useEffect as B, useRef as p } from \"react\";\nimport { forwardRefWithAs as C, render as U } from '../../utils/render.js';\nimport { useServerHandoffComplete as x } from '../../hooks/use-server-handoff-complete.js';\nimport { useSyncRefs as N } from '../../hooks/use-sync-refs.js';\nimport { Features as R, Hidden as g } from '../../internal/hidden.js';\nimport { focusElement as c, focusIn as b, Focus as m, FocusResult as I } from '../../utils/focus-management.js';\nimport { match as v } from '../../utils/match.js';\nimport { useEvent as G } from '../../hooks/use-event.js';\nimport { useTabDirection as K, Direction as M } from '../../hooks/use-tab-direction.js';\nimport { useIsMounted as y } from '../../hooks/use-is-mounted.js';\nimport { useOwnerDocument as V } from '../../hooks/use-owner.js';\nimport { useEventListener as O } from '../../hooks/use-event-listener.js';\nimport { microTask as A } from '../../utils/micro-task.js';\nimport { useWatch as k } from '../../hooks/use-watch.js';\nimport { useDisposables as W } from '../../hooks/use-disposables.js';\nlet q = \"div\";\n\nvar P = (t => (t[t.None = 1] = \"None\", t[t.InitialFocus = 2] = \"InitialFocus\", t[t.TabLock = 4] = \"TabLock\", t[t.FocusLock = 8] = \"FocusLock\", t[t.RestoreFocus = 16] = \"RestoreFocus\", t[t.All = 30] = \"All\", t))(P || {});\n\nfunction J(r, l) {\n  let e = p(null),\n      n = N(e, l),\n      {\n    initialFocus: u,\n    containers: o,\n    features: t = 30,\n    ...a\n  } = r;\n  x() || (t = 1);\n  let T = V(e);\n  z({\n    ownerDocument: T\n  }, Boolean(t & 16));\n  let f = Q({\n    ownerDocument: T,\n    container: e,\n    initialFocus: u\n  }, Boolean(t & 2));\n  Y({\n    ownerDocument: T,\n    container: e,\n    containers: o,\n    previousActiveElement: f\n  }, Boolean(t & 8));\n  let F = K(),\n      H = G(s => {\n    let i = e.current;\n    if (!i) return;\n\n    (_ => _())(() => {\n      v(F.current, {\n        [M.Forwards]: () => {\n          b(i, m.First, {\n            skipElements: [s.relatedTarget]\n          });\n        },\n        [M.Backwards]: () => {\n          b(i, m.Last, {\n            skipElements: [s.relatedTarget]\n          });\n        }\n      });\n    });\n  }),\n      S = W(),\n      L = p(!1),\n      h = {\n    ref: n,\n\n    onKeyDown(s) {\n      s.key == \"Tab\" && (L.current = !0, S.requestAnimationFrame(() => {\n        L.current = !1;\n      }));\n    },\n\n    onBlur(s) {\n      let i = new Set(o == null ? void 0 : o.current);\n      i.add(e);\n      let E = s.relatedTarget;\n      E instanceof HTMLElement && E.dataset.headlessuiFocusGuard !== \"true\" && (j(i, E) || (L.current ? b(e.current, v(F.current, {\n        [M.Forwards]: () => m.Next,\n        [M.Backwards]: () => m.Previous\n      }) | m.WrapAround, {\n        relativeTo: s.target\n      }) : s.target instanceof HTMLElement && c(s.target)));\n    }\n\n  };\n  return d.createElement(d.Fragment, null, Boolean(t & 4) && d.createElement(g, {\n    as: \"button\",\n    type: \"button\",\n    \"data-headlessui-focus-guard\": !0,\n    onFocus: H,\n    features: R.Focusable\n  }), U({\n    ourProps: h,\n    theirProps: a,\n    defaultTag: q,\n    name: \"FocusTrap\"\n  }), Boolean(t & 4) && d.createElement(g, {\n    as: \"button\",\n    type: \"button\",\n    \"data-headlessui-focus-guard\": !0,\n    onFocus: H,\n    features: R.Focusable\n  }));\n}\n\nlet X = C(J),\n    Le = Object.assign(X, {\n  features: P\n});\n\nfunction z(_ref, l) {\n  let {\n    ownerDocument: r\n  } = _ref;\n  let e = p(null);\n  O(r == null ? void 0 : r.defaultView, \"focusout\", u => {\n    l && (e.current || (e.current = u.target));\n  }, !0), k(() => {\n    l || ((r == null ? void 0 : r.activeElement) === (r == null ? void 0 : r.body) && c(e.current), e.current = null);\n  }, [l]);\n  let n = p(!1);\n  B(() => (n.current = !1, () => {\n    n.current = !0, A(() => {\n      n.current && (c(e.current), e.current = null);\n    });\n  }), []);\n}\n\nfunction Q(_ref2, n) {\n  let {\n    ownerDocument: r,\n    container: l,\n    initialFocus: e\n  } = _ref2;\n  let u = p(null),\n      o = y();\n  return k(() => {\n    if (!n) return;\n    let t = l.current;\n    t && A(() => {\n      if (!o.current) return;\n      let a = r == null ? void 0 : r.activeElement;\n\n      if (e != null && e.current) {\n        if ((e == null ? void 0 : e.current) === a) {\n          u.current = a;\n          return;\n        }\n      } else if (t.contains(a)) {\n        u.current = a;\n        return;\n      }\n\n      e != null && e.current ? c(e.current) : b(t, m.First) === I.Error && console.warn(\"There are no focusable elements inside the <FocusTrap />\"), u.current = r == null ? void 0 : r.activeElement;\n    });\n  }, [n]), u;\n}\n\nfunction Y(_ref3, u) {\n  let {\n    ownerDocument: r,\n    container: l,\n    containers: e,\n    previousActiveElement: n\n  } = _ref3;\n  let o = y();\n  O(r == null ? void 0 : r.defaultView, \"focus\", t => {\n    if (!u || !o.current) return;\n    let a = new Set(e == null ? void 0 : e.current);\n    a.add(l);\n    let T = n.current;\n    if (!T) return;\n    let f = t.target;\n    f && f instanceof HTMLElement ? j(a, f) ? (n.current = f, c(f)) : (t.preventDefault(), t.stopPropagation(), c(T)) : c(n.current);\n  }, !0);\n}\n\nfunction j(r, l) {\n  var e;\n\n  for (let n of r) if ((e = n.current) != null && e.contains(l)) return !0;\n\n  return !1;\n}\n\nexport { Le as FocusTrap };","map":{"version":3,"sources":["D:/Code/react+node/blog/client/node_modules/@headlessui/react/dist/components/focus-trap/focus-trap.js"],"names":["d","useEffect","B","useRef","p","forwardRefWithAs","C","render","U","useServerHandoffComplete","x","useSyncRefs","N","Features","R","Hidden","g","focusElement","c","focusIn","b","Focus","m","FocusResult","I","match","v","useEvent","G","useTabDirection","K","Direction","M","useIsMounted","y","useOwnerDocument","V","useEventListener","O","microTask","A","useWatch","k","useDisposables","W","q","P","t","None","InitialFocus","TabLock","FocusLock","RestoreFocus","All","J","r","l","e","n","initialFocus","u","containers","o","features","a","T","z","ownerDocument","Boolean","f","Q","container","Y","previousActiveElement","F","H","s","i","current","_","Forwards","First","skipElements","relatedTarget","Backwards","Last","S","L","h","ref","onKeyDown","key","requestAnimationFrame","onBlur","Set","add","E","HTMLElement","dataset","headlessuiFocusGuard","j","Next","Previous","WrapAround","relativeTo","target","createElement","Fragment","as","type","onFocus","Focusable","ourProps","theirProps","defaultTag","name","X","Le","Object","assign","defaultView","activeElement","body","contains","Error","console","warn","preventDefault","stopPropagation","FocusTrap"],"mappings":"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","sourcesContent":["import d,{useEffect as B,useRef as p}from\"react\";import{forwardRefWithAs as C,render as U}from'../../utils/render.js';import{useServerHandoffComplete as x}from'../../hooks/use-server-handoff-complete.js';import{useSyncRefs as N}from'../../hooks/use-sync-refs.js';import{Features as R,Hidden as g}from'../../internal/hidden.js';import{focusElement as c,focusIn as b,Focus as m,FocusResult as I}from'../../utils/focus-management.js';import{match as v}from'../../utils/match.js';import{useEvent as G}from'../../hooks/use-event.js';import{useTabDirection as K,Direction as M}from'../../hooks/use-tab-direction.js';import{useIsMounted as y}from'../../hooks/use-is-mounted.js';import{useOwnerDocument as V}from'../../hooks/use-owner.js';import{useEventListener as O}from'../../hooks/use-event-listener.js';import{microTask as A}from'../../utils/micro-task.js';import{useWatch as k}from'../../hooks/use-watch.js';import{useDisposables as W}from'../../hooks/use-disposables.js';let q=\"div\";var P=(t=>(t[t.None=1]=\"None\",t[t.InitialFocus=2]=\"InitialFocus\",t[t.TabLock=4]=\"TabLock\",t[t.FocusLock=8]=\"FocusLock\",t[t.RestoreFocus=16]=\"RestoreFocus\",t[t.All=30]=\"All\",t))(P||{});function J(r,l){let e=p(null),n=N(e,l),{initialFocus:u,containers:o,features:t=30,...a}=r;x()||(t=1);let T=V(e);z({ownerDocument:T},Boolean(t&16));let f=Q({ownerDocument:T,container:e,initialFocus:u},Boolean(t&2));Y({ownerDocument:T,container:e,containers:o,previousActiveElement:f},Boolean(t&8));let F=K(),H=G(s=>{let i=e.current;if(!i)return;(_=>_())(()=>{v(F.current,{[M.Forwards]:()=>{b(i,m.First,{skipElements:[s.relatedTarget]})},[M.Backwards]:()=>{b(i,m.Last,{skipElements:[s.relatedTarget]})}})})}),S=W(),L=p(!1),h={ref:n,onKeyDown(s){s.key==\"Tab\"&&(L.current=!0,S.requestAnimationFrame(()=>{L.current=!1}))},onBlur(s){let i=new Set(o==null?void 0:o.current);i.add(e);let E=s.relatedTarget;E instanceof HTMLElement&&E.dataset.headlessuiFocusGuard!==\"true\"&&(j(i,E)||(L.current?b(e.current,v(F.current,{[M.Forwards]:()=>m.Next,[M.Backwards]:()=>m.Previous})|m.WrapAround,{relativeTo:s.target}):s.target instanceof HTMLElement&&c(s.target)))}};return d.createElement(d.Fragment,null,Boolean(t&4)&&d.createElement(g,{as:\"button\",type:\"button\",\"data-headlessui-focus-guard\":!0,onFocus:H,features:R.Focusable}),U({ourProps:h,theirProps:a,defaultTag:q,name:\"FocusTrap\"}),Boolean(t&4)&&d.createElement(g,{as:\"button\",type:\"button\",\"data-headlessui-focus-guard\":!0,onFocus:H,features:R.Focusable}))}let X=C(J),Le=Object.assign(X,{features:P});function z({ownerDocument:r},l){let e=p(null);O(r==null?void 0:r.defaultView,\"focusout\",u=>{l&&(e.current||(e.current=u.target))},!0),k(()=>{l||((r==null?void 0:r.activeElement)===(r==null?void 0:r.body)&&c(e.current),e.current=null)},[l]);let n=p(!1);B(()=>(n.current=!1,()=>{n.current=!0,A(()=>{n.current&&(c(e.current),e.current=null)})}),[])}function Q({ownerDocument:r,container:l,initialFocus:e},n){let u=p(null),o=y();return k(()=>{if(!n)return;let t=l.current;t&&A(()=>{if(!o.current)return;let a=r==null?void 0:r.activeElement;if(e!=null&&e.current){if((e==null?void 0:e.current)===a){u.current=a;return}}else if(t.contains(a)){u.current=a;return}e!=null&&e.current?c(e.current):b(t,m.First)===I.Error&&console.warn(\"There are no focusable elements inside the <FocusTrap />\"),u.current=r==null?void 0:r.activeElement})},[n]),u}function Y({ownerDocument:r,container:l,containers:e,previousActiveElement:n},u){let o=y();O(r==null?void 0:r.defaultView,\"focus\",t=>{if(!u||!o.current)return;let a=new Set(e==null?void 0:e.current);a.add(l);let T=n.current;if(!T)return;let f=t.target;f&&f instanceof HTMLElement?j(a,f)?(n.current=f,c(f)):(t.preventDefault(),t.stopPropagation(),c(T)):c(n.current)},!0)}function j(r,l){var e;for(let n of r)if((e=n.current)!=null&&e.contains(l))return!0;return!1}export{Le as FocusTrap};\n"]},"metadata":{},"sourceType":"module"}